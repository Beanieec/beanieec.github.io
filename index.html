<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Молоток и фотография</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(to bottom, #1a2a6c, #b21f1f, #fdbb2d);
            font-family: Arial, sans-serif;
            overflow: hidden;
            cursor: none;
        }

        h1 {
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin-bottom: 20px;
        }

        .container {
            position: relative;
            width: 800px;
            height: 450px;
            margin: 20px auto;
            border: 5px solid #333;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            background-color: #000;
        }

        #photo {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: filter 0.3s;
        }

        .crack {
            position: absolute;
            pointer-events: none;
            z-index: 10;
            background-size: contain;
            background-repeat: no-repeat;
        }

        #hammer {
            position: absolute;
            width: 80px;
            height: 80px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M30,30 L70,10 L90,30 L70,50 L30,30 Z" fill="%23cc0000"/><rect x="40" y="50" width="20" height="40" fill="%23666"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            pointer-events: none;
            z-index: 100;
            transform-origin: center bottom;
            transition: transform 0.1s;
        }

        .hit {
            animation: hit 0.3s forwards;
        }

        @keyframes hit {
            0% { transform: rotate(0deg); }
            50% { transform: rotate(-45deg); }
            100% { transform: rotate(0deg); }
        }

        .instructions {
            color: white;
            text-align: center;
            margin-top: 20px;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>Бей молотком по фотографии!</h1>
    
    <div class="container">
        <img id="photo" src="https://images.unsplash.com/photo-1518791841217-8f162f1e1131?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60" alt="Фотография для ударов">
        <div id="hammer"></div>
    </div>
    
    <div class="instructions">
        <p>Кликните в любое место фотографии, чтобы ударить молотком</p>
        <p>Нажмите R для сброса фотографии</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const container = document.querySelector('.container');
            const photo = document.getElementById('photo');
            const hammer = document.getElementById('hammer');
            
            // Создаем массив с возможными трещинами
            const cracks = [
                'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M10,10 C30,30 50,20 70,40 C80,50 90,40 90,60" stroke="white" stroke-width="2" fill="none" /></svg>',
                'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M20,80 C40,60 60,70 80,50 C85,45 90,50 90,60" stroke="white" stroke-width="2" fill="none" /></svg>',
                'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M50,10 C40,40 60,50 50,80" stroke="white" stroke-width="2" fill="none" /></svg>'
            ];
            
            // Обработчик движения мыши
            document.addEventListener('mousemove', function(e) {
                hammer.style.left = (e.pageX - 40) + 'px';
                hammer.style.top = (e.pageY - 20) + 'px';
            });
            
            // Обработчик клика (удара молотком)
            container.addEventListener('click', function(e) {
                const rect = container.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                // Анимация удара молотком
                hammer.classList.remove('hit');
                void hammer.offsetWidth; // Сбрасываем анимацию
                hammer.classList.add('hit');
                
                // Создаем эффект трещины
                createCrack(x, y);
                
                // Добавляем эффект вспышки
                createFlash(x, y);
            });
            
            // Функция создания трещины
            function createCrack(x, y) {
                const crack = document.createElement('div');
                crack.classList.add('crack');
                
                // Выбираем случайную трещину
                const randomCrack = cracks[Math.floor(Math.random() * cracks.length)];
                crack.style.backgroundImage = `url("${randomCrack}")`;
                
                // Устанавливаем позицию
                crack.style.left = (x - 50) + 'px';
                crack.style.top = (y - 50) + 'px';
                crack.style.width = '100px';
                crack.style.height = '100px';
                
                // Добавляем трещину в контейнер
                container.appendChild(crack);
                
                // Удаляем трещину через некоторое время
                setTimeout(() => {
                    crack.remove();
                }, 3000);
            }
            
            // Функция создания вспышки
            function createFlash(x, y) {
                const flash = document.createElement('div');
                flash.style.position = 'absolute';
                flash.style.left = (x - 25) + 'px';
                flash.style.top = (y - 25) + 'px';
                flash.style.width = '50px';
                flash.style.height = '50px';
                flash.style.borderRadius = '50%';
                flash.style.backgroundColor = 'rgba(255, 255, 255, 0.5)';
                flash.style.pointerEvents = 'none';
                
                container.appendChild(flash);
                
                // Анимация вспышки
                let opacity = 0.5;
                const fade = setInterval(() => {
                    opacity -= 0.05;
                    flash.style.backgroundColor = `rgba(255, 255, 255, ${opacity})`;
                    
                    if (opacity <= 0) {
                        clearInterval(fade);
                        flash.remove();
                    }
                }, 30);
            }
            
            // Сброс при нажатии R
            document.addEventListener('keydown', function(e) {
                if (e.key === 'r' || e.key === 'R') {
                    // Удаляем все трещины
                    const allCracks = document.querySelectorAll('.crack');
                    allCracks.forEach(crack => crack.remove());
                }
            });
        });
    </script>
</body>
</html>
